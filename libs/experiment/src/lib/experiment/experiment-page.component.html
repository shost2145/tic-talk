<form [formGroup]="form" (ngSubmit)="onSubmit($event)" class="form">
  <label class="tt-control-label mb16">
    Выбор мастера
    <select formControlName="type" class="tt-input">
      <option [value]="ReceiverTypes.MASSAGE">Массажист</option>
      <option [value]="ReceiverTypes.BEAUTY_MASTER">Бьюти-мастер</option>
    </select>
  </label>

  <div class="wrapper-input">
    <label class="tt-control-label mb16">
      Имя
      <input formControlName="name" class="tt-input" placeholder="Введите имя" />
      <small class="validation"> Это поле обязательно!</small>
    </label>

    <label class="tt-control-label mb16">
      Фамилия
      <input formControlName="lastName" class="tt-input" placeholder="Введите фамилию" />
      <small class="validation"> Это поле обязательно!</small>
    </label>

    <label class="tt-control-label mb16">
      Номер телефона
      <input
        formControlName="phone"
        class="tt-input"
        placeholder="Введите номер"
        [maskito]="phoneOptions"
      />
      <small class="validation"> Укажите номер полностью!</small>
    </label>
  </div>

  @if (form.controls.type.value===ReceiverTypes.MASSAGE){
  <label class="tt-control-label mb16">
    Анамнез
    <textarea
      (input)="onTextAreaInput($event)"
      formControlName="anamnez"
      class="tt-input"
      placeholder="Укажите диагноз и рекомендации врача"
    ></textarea></label
  >} @if (form.controls.type.value===ReceiverTypes.MASSAGE){
  <div class="wrapper-input2">
    <label class="tt-control-label mb16">
      Вид массажа
      <select id="tm" formControlName="typeMassage" class="tt-input">
        <option value="" disabled selected hidden>выберите интересующую услугу</option>
        <option value="ms">массаж спины</option>
        <option value="omt">общий массаж тела</option>
        <option value="lm">лимфодренажный массаж</option>
        <option value="am">антицеллюлитный массаж</option>
      </select>
    </label>

    <label class="tt-control-label mb16">
      Продолжительность услуги
      <select id="duration" formControlName="durationOfService" class="tt-imput2">
        <option value=""  disabled selected>выбор времени
         </option>
        <option *ngFor="let option of filteredDurations" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
    </label>
  </div>
  } @else {
  <div class="wrapper-input2">
    <label class="tt-control-label mb16">
      Выбор услуги
      <select formControlName="typeMassage" class="tt-input">
        <option style="color: grey !important;" value="" disabled selected hidden="">поберите интересующую услугу</option>
        <option>Коррекция бровей</option>
        <option>Наращивание ресниц</option>
        <option>Окрашивание бровей</option>
        <option>общая услуга</option>
        <option>Усы как у таракана! Побрейте меня!</option>
      </select>
    </label>
  </div>
  }

  <div class="wrapper-input2">
    <label class="tt-control-label mb16" for="date-input">
      Дата
      <input
        type="date" [min]="today"
        class="tt-input"
        placeholder="ДД/ММ/ГГГГ"
        formControlName="date"
        (keydown)="disableInput($event)"
        (paste)="disableInput($event)"
      />                                          <!--блокируем ввод -->
      <div class="date"></div>
      <small class="validation"> Это поле обязательно!</small>
    </label>

    <label class="tt-control-label mb16">
      Время
      <input id="durationTime"
        type="text" formControlName="time" class="tt-input" placeholder="чч:мм" />
      <small> Для выбора времени используй &#8593; &#8595;  </small>
    </label>

  </div>

  @if (form.controls.type.value===ReceiverTypes.MASSAGE){
  <div class="wrapper-input3">
    <label class="tt-control-label mb16">
      Выбор атмосферы(музыка)
      <select formControlName="atmosphere" class="tt-input">
        <option class="option" value="" disabled selected hidden="">
          подбор атмосферы
        </option>
        <option>шум моря</option>
        <option>горение костра</option>
        <option>шум дождя</option>
        <option>дикая чаща леса</option>
        <option>Хочу экзотики! Джунгли!</option>
      </select>
    </label>

    <label class="tt-control-label mb16">
      Выбор масла
      <select formControlName="oil" class="tt-input">
        <option class="option" value="" disabled selected hidden="">
          выберите тип масла</option>
        <option>Виноградная косточка</option>
        <option>Смесь масел</option>
        <option>Абрикосовая косточка</option>
        <option>Как в СССР на тальке!</option>
      </select>
    </label>
  </div>
  } @if (form.controls.type.value===ReceiverTypes.BEAUTY_MASTER){ @for (group of
  form.controls.addresses.controls; track group; let i = $index){

  <div class="wrapper-btn">
    @if ($index!==0){
    <button class="btn2" type="button" id="btnON" (click)="deleteAddress(i)">Удалить адрес</button>}
    <button class="btn2" type="submit" (click)="addAddresses()">Добавить адрес</button>
  </div>

  <h4>Адрес доставки(фирменная косметика на дом)</h4>
  <div class="wrapper-input4" [formGroup]="group">


    <label class="tt-control-label mb16">
      <input formControlName="city" class="tt-input"  placeholder="Город" />
      @if (suggestions$ | async; as suggestions){
        @if (isDropdownOpened()){
          <div class="suggestion-dropdown">
            @for (suggest of suggestions; track suggest){
              <button class="suggest-btn"
                      (click)="onSuggestionPick(suggest, i)"
              >{{suggest.data.city}} {{suggest.data.street}}</button>
            }
          </div>}}
    </label>

    <label class="tt-control-label mb16">
      <input formControlName="street" id="street" class="tt-input" placeholder="улица" />
    </label>


    <label class="tt-control-label mb16">
      <input formControlName="house" id="house" class="tt-input" placeholder="Дом" />
    </label>

    <label class="tt-control-label mb16">
      <input formControlName="apartment" id="apartment" class="tt-input" placeholder="Квартира" />
    </label>

  </div>
  } }


  @if (form.controls.type.value===ReceiverTypes.BEAUTY_MASTER){
  <div class="checkbox">
    <h4>Дополнительно</h4>
    <label class="tt-control-label mb16">
      Дополнительная упаковка
      <input formControlName="package" type="checkbox">
      Ускоренная доставка
      <input formControlName="deliverySpeed" type="checkbox">
    </label>


  </div>}



  <div class="wrapper-btn">
    <button class="btn btn-shadow mt20" type="button" (click)="cancellation()">отмена</button>
    <button class="btn btn-shadow mt20" type="submit">готово!</button>
  </div>

</form>

